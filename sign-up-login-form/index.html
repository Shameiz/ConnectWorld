<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Sign-Up/Login Form</title>
  <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">


  <link rel="stylesheet" href="css/style.css">
  <!-- Favicon -->
        <link rel="shortcut icon" href="world.png" type="image/world-icon">
        <link rel="icon" href="world.png" type="image/world-icon">

</head>
<br> </br>
<br> </br>
<center> <img src="Final Logo.png" alt="logo" width="400" height="150"></center>

<body>
  <div class="form">
    <ul class="tab-group">
      <li class="tab active"><a href="#signup">Sign Up</a></li>
      <li class="tab"><a href="#login">Log In</a></li>
    </ul>

    <div class="tab-content">
      <div id="signup">
        <h1>Sign Up for Free</h1>

        <form action="#" onsubmit="return foo();">

          <div class="top-row">
            <div class="field-wrap">
              <label>
                First Name<span class="req">*</span>
              </label>
              <input name="fname" type="text" required autocomplete="off" />
            </div>

            <div class="field-wrap">
              <label>
                Last Name<span class="req">*</span>
              </label>
              <input name="lname" type="text"required autocomplete="off"/>
            </div>
          </div>

          <div class="field-wrap">
            <label>
              Email Address<span class="req">*</span>
            </label>
            <input name="email" type="email"required autocomplete="off"/>
          </div>

          <div class="field-wrap">
            <label>
              Set A Password<span class="req">*</span>
            </label>
            <input name="pword" type="password"required autocomplete="off"/>
          </div>

          <button id="submit" type="submit" class="button button-block"/>Get Started</button>

        </form>

      </div>

      <div id="login">
        <h1>Welcome Back!</h1>

        <form action="#" onsubmit="return actionA();">

          <div class="field-wrap">
            <label>
              Email Address<span class="req">*</span>
            </label>
            <input name="signe" type="email"required autocomplete="off"/>
          </div>

          <div class="field-wrap">
            <label>
              Password<span class="req">*</span>
            </label>
            <input name="passe" type="password"required autocomplete="off"/>
          </div>

          <p class="forgot"><a href="#">Forgot Password?</a></p>

          <button id="loginA" class="button button-block"/>Log In</button>

        </form>

      </div>

    </div><!-- tab-content -->

    <script>
    function foo(){
      if (typeof(Storage) !== "undefined") {

        var login=[3];



        var fname = document.querySelector('input[name="fname"]');
        login[2]= fname.value;

        var lname = document.querySelector('input[name="lname"]');
        login[1]= lname.value;

        var password = document.querySelector('input[name="pword"]');
        login[0]= password.value;

        var email = document.querySelector('input[name="email"]');
        localStorage.setItem(email.value, JSON.stringify(login));
        localStorage.setItem("currentLogin", email.value);

        //var login_details = JSON.parse(localStorage.getItem(email.value));
        var login_details = JSON.parse(localStorage.getItem(email.value));
        console.log(JSON.stringify(login_details));
        window.location="Page2/almostthere.html";
        return false;
      }
    }

      function match(){
        if (typeof(Storage) !== "undefined") {
          var email = document.querySelector('input[name="signe"]');
          var emailText= email.value;

          var pass = document.querySelector('input[name="passe"]');
          var passText= pass.value;

          var login_details = JSON.parse(localStorage.getItem(emailText));
          var login_array= JSON.stringify(login_details);

          if(login_details!=null){
            if(passText==JSON.parse(login_array)[0]) return true;
            else{
              console.log("login details, pass not right.");
              return false;
            }
          }
          else {
            console.log("login details not there");
            return false;
          }
      }

    }

    function actionA(){
      if(match() == true){
        console.log("success");
        localStorage.setItem("currentLogin", emailText);
        window.location="Page2/almostthere.html";
        return false;
      }
      else{
        console.log("failure");
        return true;
      }
    }
    const subBtn=document.querySelector('#submit');
    //subBtn.addEventListener('click',foo);

    const logBtn=document.querySelector('#loginA');
    logBtn.addEventListener('click', actionA);
    </script>


  </div> <!-- /form -->
  <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>


  <script src="js/index.js"></script>

</body>
</html>
